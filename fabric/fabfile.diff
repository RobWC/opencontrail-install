diff -ru -x testbed.py fabfile/tasks/helpers.py fabfile-dev/tasks/helpers.py
--- fabfile/tasks/helpers.py	2015-09-30 19:23:30.000000000 -0700
+++ fabfile-dev/tasks/helpers.py	2015-10-29 23:42:04.024119048 -0700
@@ -1327,7 +1327,7 @@
         exit(1)
     else:
         print "\nINFO: \n\tOpenstack and cfgm nodes are same, No need for contrail_internal_vip to be specified in testbed.py."
-    execute('add_openstack_reserverd_ports')
+    #execute('add_openstack_reserverd_ports')
 
 def role_to_ip_dict(role=None):
     role_to_ip_dict = {}
diff -ru -x testbed.py fabfile/tasks/provision.py fabfile-dev/tasks/provision.py
--- fabfile/tasks/provision.py	2015-09-30 19:23:30.000000000 -0700
+++ fabfile-dev/tasks/provision.py	2015-10-29 23:44:34.331782429 -0700
@@ -2308,7 +2308,7 @@
     execute('prov_analytics')
     execute('prov_control_bgp')
     execute('prov_external_bgp')
-    execute('prov_metadata_services')
+    #execute('prov_metadata_services')
     execute('prov_encap_type')
     execute('setup_remote_syslog')
     execute('add_tsn', restart=False)
diff -ru -x testbed.py fabfile/utils/cluster.py fabfile-dev/utils/cluster.py
--- fabfile/utils/cluster.py	2015-09-30 19:23:30.000000000 -0700
+++ fabfile-dev/utils/cluster.py	2015-10-29 23:42:04.048119632 -0700
@@ -173,8 +173,6 @@
     metadata_secret = None
     orch = get_orchestrator()
     if orch.lower() == 'openstack':
-        openstack_host = env.roledefs['openstack'][0]
-
         # Use metadata_secret provided in testbed. If not available
         # retrieve metadata secret from openstack node
         metadata_secret = getattr(testbed,
@@ -182,6 +180,7 @@
                                   None)
 
         if not metadata_secret:
+            openstack_host = env.roledefs['openstack'][0]
             with settings(host_string=openstack_host):
                 ostype = detect_ostype()
                 # For Juno, use service_metadata_proxy metadata_proxy_shared_secret
diff -ru -x testbed.py fabfile/utils/commandline.py fabfile-dev/utils/commandline.py
--- fabfile/utils/commandline.py	2015-09-30 19:23:29.000000000 -0700
+++ fabfile-dev/utils/commandline.py	2015-10-29 23:42:04.040119437 -0700
@@ -216,12 +216,13 @@
         cmd += " --contrail_internal_vip %s" % contrail_internal_vip
 
     if orch == 'openstack':
-        openstack_host = get_control_host_string(env.roledefs['openstack'][0])
-        openstack_ip = hstr_to_ip(openstack_host)
+        if env.roledefs['openstack']:
+            openstack_host = get_control_host_string(env.roledefs['openstack'][0])
+            openstack_ip = hstr_to_ip(openstack_host)
+            cmd += " --openstack_ip %s" % openstack_ip
         authserver_ip = get_authserver_ip()
         ks_admin_user, ks_admin_password = get_authserver_credentials()
         cmd += " --keystone_ip %s" % authserver_ip
-        cmd += " --openstack_ip %s" % openstack_ip
         cmd += " --admin_user %s" % ks_admin_user
         cmd += " --admin_password %s" % ks_admin_password
         cmd += " --admin_token %s" % get_keystone_admin_token()
@@ -308,13 +309,14 @@
         cmd += " --non_mgmt_gw %s" % tgt_gw
 
     if orch == 'openstack':
-        openstack_mgmt_ip = hstr_to_ip(env.roledefs['openstack'][0])
+        if env.roledefs['openstack']:
+            openstack_mgmt_ip = hstr_to_ip(env.roledefs['openstack'][0])
+            cmd += " --openstack_mgmt_ip %s" % openstack_mgmt_ip
         authserver_ip = get_authserver_ip()
         ks_auth_protocol = get_authserver_protocol()
         ks_auth_port = get_authserver_port()
         ks_admin_user, ks_admin_password = get_authserver_credentials()
         cmd += " --keystone_ip %s" % authserver_ip
-        cmd += " --openstack_mgmt_ip %s" % openstack_mgmt_ip
         cmd += " --keystone_auth_protocol %s" % ks_auth_protocol
         cmd += " --keystone_auth_port %s" % ks_auth_port
         cmd += " --quantum_service_protocol %s" % get_quantum_service_protocol()
diff -ru -x testbed.py fabfile/utils/host.py fabfile-dev/utils/host.py
--- fabfile/utils/host.py	2015-09-30 19:23:30.000000000 -0700
+++ fabfile-dev/utils/host.py	2015-10-29 23:42:04.032119242 -0700
@@ -8,7 +8,8 @@
 from fabfile.utils.cluster import get_orchestrator
 
 def hstr_to_ip(host_string):
-    return host_string.split('@')[1]
+    if host_string:
+        return host_string.split('@')[1]
 
 def hstr_to_user(host_string):
     return host_string.split('@')[0]
@@ -93,11 +94,9 @@
     if orch == 'vcenter':
        return get_from_testbed_dict('vcenter', 'server', None)
     # openstack
-    if openstack_node:
-        openstack_host = get_control_host_string(openstack_node)
-    else:
-        openstack_host = get_control_host_string(testbed.env.roledefs['openstack'][0])
-    openstack_ip = hstr_to_ip(openstack_host)
+    if not openstack_node and testbed.env.roledefs['openstack']:
+        openstack_node = testbed.env.roledefs['openstack'][0]
+    openstack_ip = hstr_to_ip(get_control_host_string(openstack_node))
     keystone_ip1 = getattr(testbed, 'keystone_ip', None)
     keystone_ip = get_from_testbed_dict('keystone', 'keystone_ip', keystone_ip1)
     internal_vip = get_openstack_internal_vip()
